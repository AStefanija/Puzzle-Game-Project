# Puzzle-Game-Project

<b>1.	Опис на апликацијата</b> <br>
Апликацијата која ја направив е Сложувалка, која може да се реализира со било која слика сакаме, односно слика која ние самите ја избираме. Сложувалката е еден вид игра која е интересна и широко распростанета. <br>
Во сложувалката од корисникот се очекува да ги состави парчињата на сложувалката заедно на логичен начин, за брзо време и со минимални потези, со цел да дојде до точното или забавното режение на сложувалката. 

<b>2.	Правила на играта</b> <br>
Правилата за игра на оваа сложувалка се доста едноставни и можат да ја играат деца и возрасни од најразлични возрасти.<br>
Корисникот самиот си избира која слика сака да ја намести од сликите кој ги има зачувано  на неговиот комјутер. Со клик на копчето Start, сликата се дели на 9 делчиња кои се разместуваат рамдом и истите корисникот треба да ги намести во правилниот редослед и да ја добие оригиналната слика која стои од десно. Сликата од десно, ја преставува оригиналната слика која корисникот би требало да ја добие и истата служи како еден вид на помошник за корисникот подобро да ја намести сликата.<br>
Кога корисникот ќе почне да ги мести делчињата на сложувалката, се вклучува тајмер кој го брои времето на корисникот за колку време ќе ја намести сликата. Доколку корисникот не ја намести сложувалката за 1 минута тогаш играта завршува. Исто така постои бројач на потези кои корисникот ги прави додека ја мести сложувалката и корисникот би требало да се потруди да има што е можно помалку потези. <br>
Доколку, корисникот ја намести сложувалката за помалку од 1 минута, се прикажува прозорец на кој пишува дека корисникот успешно ја наместил сложувалката и се прикажува времето за колку ја наместил како и бројот на потези кој ги направил.<br>
Постои и копче за пауза (Pause) и при клик на истото, одбројувањето на тајмерот престанува, a потоа со клик на кочето Resume, играта повторно продолжува.
Од апликацијата може да се излезе со клик на копчето Quit.



<b>3.	Изглед на апликацијата</b> <br>
Првично, кога ќе ја отвориме апликацијата таа изгледа вака: <br>
 ![alt text]
По избирињето на сликата на копчето Browse и по кликањето на копчето старт, апликацијата изгледа како на следната слика:<br>
 ![alt text] (Puzzle-Game-Project/Puzzle/Untitled1.png)
Од левата страна ни се прикажуваат разместните делчиња кои ние треба да ги наместиме, а од десната страна ни се прикажува оригиналната слика, која служи како помош. Забележуваме дека откако сме избрале слика копчето Browse се оневозможува. Исто така на почетокот и копчето за пауза е оневозможено и истото ќе се овозможи кога ќе започнеме со местењето на делчињата, кога тајмерот ќе започе да одбројува.<br>
Кога ќе ги наместиме делчињата во правилниот редослед, ни се појавува прозорче, кое ни честита за успешното завршување на играта и ни ги прикажува бројот на потези кои сме ги направиле и времето кое ни било потребно да ја направиме сликата:<br>
 
![alt text]
Доколку, не ја завршиме играта за 1 минута, тогаш се прикажува прозорче кое не известува дека ни истекло времето и треба да се обидеме повторно од почеток со местење на сликата:<br>
 ![alt text]
При клик на копчето Quit, се прикажува прозорче кое на прашува дали сме сигурни дека сакаме да ја исклучиме играта, при клик на копчето Yes играта се гаси:<br>
 ![alt text]

<b>4.	Решение на проблемот</b> <br>
За да ја направам оваа игра искористив една класа MyPuzzle, која наследува од PictureBox класата која овозможува прикажување на сликата.
Во класата MyPuzzle се чуваат параметрите index и imgIndex кои се поставени да бидат public и  една функција matching, која споредува дали index и imgIndex се еднакви.<br>
```
class MyPuzzle:PictureBox
    {
        int index = 0;
        public int Index { get { return index; } set { index = value; } }

        int imgIndex = 0;
        public int ImgIndex { get { return imgIndex; } set { imgIndex = value; } }

        public bool matching()
        {
            return (index == imgIndex);
        }
    }
```


<b>4.1	Прикажување на избраната слика</b> <br>
Со помош на функцијата ShowSelectedImage() сликата се прикажува на тој начин што се зема висината и ширината на сликата да бидат еднакви со висината и ширината на полето каде што ќе се прикажува сликата и со методите Controls.Add се додава сликата во полето каде што сакаме да ја ставиме истата. <br>
<b>4.2	Разметување на делчињата</b> <br>
Функцијата void Shuffle(ref int[] array) е функција која како аргумент прима низа и ги распределува рандом елементите на низата.<br>

Потоа оваа фунција е искористена во фунцијата Play() која ја дели сликата на 3x3 делови, со тоа што прво проверува дали делот каде што треба да стои сликата е празен. Доколку е празен ја додава сликата кој сме ја избрале и ја дели висината и ширината на сликата со бројот на редици и колони кои претходно ги поставив да бидат еднакви на 3 и со помош на функцијата Shuffle() делчињата на сликата рандом се разместуваат.<br>
```
private void Play()
        {
            if (pictureBox != null)
            {
                gbpb1.Controls.Remove(pictureBox);
                pictureBox.Dispose();
                pictureBox = null;
            }
            if (pictureBox == null)
            {
                images = new Image[size];
                picBoxes = new PictureBox[size];
            }
            int numRow = (int)Math.Sqrt(size);
            int numCol = numRow;
            int X = gbpb1.Width / numRow;
            int Y = gbpb1.Height / numCol;
            int[] index = new int[size];
            for (int i = 0; i < size; i++)
            {
                index[i] = i;

                if (picBoxes[i] == null)
                {
                    picBoxes[i] = new MyPuzzle();
                    picBoxes[i].Click += new EventHandler(OnClick);
                    
                    picBoxes[i].BorderStyle = BorderStyle.Fixed3D;
                }
                
                picBoxes[i].Width = X;
                picBoxes[i].Height = Y;

                ((MyPuzzle)picBoxes[i]).Index = i;

                CreateImg(img, images, i, numRow, numCol, X, Y);
                picBoxes[i].Location = new Point(X * (i % numCol), Y * (i / numCol));
                if (!gbpb1.Controls.Contains(picBoxes[i]))
                    gbpb1.Controls.Add(picBoxes[i]);
                
            }
            Shuffle(ref index);
            for (int i = 0; i < size; i++)
            {
                picBoxes[i].Image = images[index[i]];
                ((MyPuzzle)picBoxes[i]).ImgIndex = index[i];
                picBoxes[i].Click += new EventHandler(UpdateTimeElapsed);
            }
        }
  ```
 За ова да биде возможно искористив BitMap каде се чуваат висината и ширината на полето за слика и една функација CreateImg која ќе направи правоаголници во кои ќе бидат сместени делчињата на сликата. И оваа функција исто така е искористена во функцијата Play().<br>
<b>4.3	Валидација на корисничкото решение</b> <br>
Функцијата Check() се користи за валидација дали корисничкото решение е точно, со тоа што го споредува корисничкото решение дали е исто со оригиналната слика која е поставена од десно. И оваа функција се искористува во функцијата private void Switch(MyPuzzle one, MyPuzzle two), која се користи за две селектирани делчиња да можат да си ги заменат местата, бројот на потези се зголемува за еден при секое разместување на делчињата и исто така при секој потег се проверува дали корисникот веќе дошол до вистинското решение со помош на функцијата Check().

